# Day 014: Linux Process Troubleshooting

**Time**: 10 minutes

## Objective
The production support team of xFusionCorp Industries has deployed some of the latest monitoring tools to keep an eye on every service, application, etc. running on the systems. 

One of the monitoring systems reported about `Apache` service unavailability on one of the app servers in `Stratos DC`.

Identify the faulty app host and fix the issue. Make sure Apache service is up and running on all app hosts. 

Also, make sure Apache is running on port `8088` on all app servers.

## Technologies Used
- `curl`
- `systemctl`
- `ss`
- `kill`
- `journalctl`

## Steps

1. Let's **start** with making sure Apache is running on port `8088` on all servers.

    ```bash
    thor@jumphost ~$ curl http://stapp01:8088
    curl: (7) Failed to connect to stapp01 port 8088: Connection refused

    thor@jumphost ~$ curl http://stapp02:8088
    # Responded with Apache page

    thor@jumphost ~$ curl http://stapp03:8088
    # Responded with Apache page as well

    # So our problem server is stapp01.
    ```

2. Now that we've established the server with an issue is `stapp01`, let's SSH and troubleshoot

    ```bash
    # SSH to host
    thor@jumphost ~$ ssh tony@stapp01

    # Check status of httpd service
    [tony@stapp01 ~]$ sudo systemctl status httpd
    # ● httpd.service - The Apache HTTP Server
    # Loaded: loaded (/usr/lib/systemd/system/httpd.service; disabled; vendor preset: disabled)
    # Active: failed (Result: exit-code) since Fri 2025-12-05 13:50:14 UTC; 7min ago

    # Okay, it failed to start, why?
    [tony@stapp01 ~]$ sudo journalctl -xe
    # ...
    # -- Unit httpd.service has begun starting up.
    # ...
    # Dec 05 14:09:00 stapp01.stratos.xfusioncorp.com httpd[874]: (98)Address already in use: AH00072: make_sock: could not bind to address 0.0.0.0:8088

    # Okay, so some other service is hogging port 8088.
    ```

3. Find the service using 8088, and kill the process

    ```bash
    # Find the process:
    [tony@stapp01 ~]$ sudo ss -tulpn | grep 8088
    # tcp  LISTEN  0  10  127.0.0.1:8088  *:*  users:(("sendmail",pid=780,fd=4))

    # Kill it
    [tony@stapp01 ~]$ sudo kill 780

    # Restart httpd
    [tony@stapp01 ~]$ sudo systemctl restart httpd

    # Confirm it is up
    [tony@stapp01 ~]$ sudo systemctl status httpd
    # ● httpd.service - The Apache HTTP Server
    # Loaded: loaded (/usr/lib/systemd/system/httpd.service; disabled; vendor preset: disabled)
    # Active: active (running) since Fri 2025-12-05 14:16:45 UTC; 4s ago
    ```

4. Try again to see if the website is reachable

    ```bash
    # cURL
    thor@jumphost ~$ curl http://stapp01:8088
    # (Got proper response back)
    ```

## Key Takeaways
- This is similar to day 12, but less complex
- It is always good to take notes and document solutions, like we're doing in this repo. That way, if you run into a similar issue again, you've got remedation steps.
