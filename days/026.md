# Day 026: Git Manage Remotes

**Time**: 6 minutes

## Objective
The xFusionCorp development team added updates to the project that is maintained under `/opt/games.git` repo and cloned under `/usr/src/kodekloudrepos/games`. Recently some changes were made on Git server that is hosted on `Storage server` in `Stratos DC`. 

The DevOps team added some new Git remotes, so we need to update remote on `/usr/src/kodekloudrepos/games` repository as per details mentioned below:

- In `/usr/src/kodekloudrepos/games` repo add a new remote `dev_games` and point it to `/opt/xfusioncorp_games.git` repository.

- There is a file `/tmp/index.html` on same server; copy this file to the repo and add/commit to master branch.

- Finally push `master` branch to this new remote origin.

## Technologies Used
- `git`
- `ssh`
- `vi`
- `cp`

## Steps

1. SSH into `ststor01` server and move into appropriate directory

    ```bash
    # SSH to server
    thor@jumphost ~$ ssh natasha@ststor01
    [natasha@ststor01 ~]$

    # Change directories into /usr/src/kodekloudrepos/games
    [natasha@ststor01 ~]$ cd /usr/src/kodekloudrepos/games
    ```

2. Modify gitconfig (you can also do this with `git remote add`, but I'll do it another way)

    ```bash
    # Open vi
    [natasha@ststor01 ~]$ sudo vi .git/config

    # Change this:
    [core]
            repositoryformatversion = 0
            filemode = true
            bare = false
            logallrefupdates = true
    [remote "origin"]
            url = /opt/games.git
            fetch = +refs/heads/*:refs/remotes/origin/*
    [branch "master"]
            remote = origin
            merge = refs/heads/master

    # To this:
    [core]
            repositoryformatversion = 0
            filemode = true
            bare = false
            logallrefupdates = true
    [remote "origin"]
            url = /opt/games.git
            fetch = +refs/heads/*:refs/remotes/origin/*
    [remote "dev_games"]
            url = /opt/xfusioncorp_games.git
            fetch = +refs/heads/*:refs/remotes/origin/*
    [branch "master"]
            remote = origin
            merge = refs/heads/master
    ```

3. copy `/tmp/index.html` file to the repo and add/commit to master branch.

    ```bash
    # Copy file
    [natasha@ststor01 games]$ sudo cp /tmp/index.html .

    # git add
    [natasha@ststor01 games]$ sudo git add .

    # git commit
    [natasha@ststor01 games]$ sudo git commit -m "add index.html"
    # [master 65ce1ab] add index.html
    # 1 file changed, 10 insertions(+)
    # create mode 100644 index.html
    ```

4. push `master` branch to this new remote origin

    ```bash
    # git push
    [natasha@ststor01 games]$ sudo git push dev_games master
    # Enumerating objects: 6, done.
    # Counting objects: 100% (6/6), done.
    # Delta compression using up to 16 threads
    # Compressing objects: 100% (4/4), done.
    # Writing objects: 100% (6/6), 582 bytes | 582.00 KiB/s, done.
    # Total 6 (delta 0), reused 0 (delta 0), pack-reused 0 (from 0)
    # To /opt/xfusioncorp_games.git
    # * [new branch]      master -> master
    ```

## Key Takeaways
- Always good to know multiple ways to achieve the same goal. `git remote add` would've been the easiest way to do this, but because I'm simultaneously learning Kubernetes and need to understand the importance of declarative manifests / configuration files, I took another approach.
