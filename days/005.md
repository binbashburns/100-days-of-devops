# Day 005: SElinux Installation and Configuration

**Time**: 10 minutes

## Objective
Install `SELinux` packages.

Permanently disable `SELinux` for the time being; it will be re-enabled after necessary configuration changes.

No need to reboot the server, as a scheduled maintenance reboot is already planned for tonight.

Disregard the current status of `SELinux` via the command line; the final status after the reboot should be disabled.

## Technologies Used
- SELinux
- `vi`

## Steps

1. SSH to `stapp01`

    ```bash
    thor@jumphost ~$ ssh tony@stapp01
    [tony@stapp01 ~]$
    ```

2. Determine OS version

    ```bash
    [tony@stapp01 ~]$ cat /etc/os-release 
    NAME="CentOS Stream"
    VERSION="9"
    ```

3. Lookup guidance on [SELinux installation](https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/7/html/selinux_users_and_administrators_guide/chap-security-enhanced_linux-working_with_selinux#sect-Security-Enhanced_Linux-Working_with_SELinux-SELinux_Packages) and [configuration](https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html-single/using_selinux/index#selinux-architecture_getting-started-with-selinux) for CentOS 9 / RHEL-like systems
    ```bash
    # Install SELinux and dependencies
    [tony@stapp01 ~]$ sudo dnf install selinux-policy-targeted policycoreutils policycoreutils-gui libselinux-utils policycoreutils-python-utils setools-console checkpolicy

    # Check SELinux config
    [tony@stapp01 ~]$ cat /etc/selinux/config

    # This file controls the state of SELinux on the system.
    # SELINUX= can take one of these three values:
    #     enforcing - SELinux security policy is enforced.
    #     permissive - SELinux prints warnings instead of enforcing.
    #     disabled - No SELinux policy is loaded
    
    ...
    
    SELINUX=enforcing
    
    ...
    ```
4. Change `SELINUX=enforcing` to `SELINUX=disabled` in `/etc/selinux/config`

    ```bash
    # Open in vi
    [tony@stapp01 ~]$ sudo vi /etc/selinux/config

    # (change `SELINUX=enforcing` to `SELINUX=disabled`)

    # Verify changes applied to SELinux config
    [tony@stapp01 ~]$ cat /etc/selinux/config

    # This file controls the state of SELinux on the system.
    # SELINUX= can take one of these three values:
    #     enforcing - SELinux security policy is enforced.
    #     permissive - SELinux prints warnings instead of enforcing.
    #     disabled - No SELinux policy is loaded
    
    ...
    
    SELINUX=disabled
    
    ...
    ```

## Key Takeaways
- There are a lot of random Medium articles and developer documents out there giving you differing advice on how to configure this. Since the operating system is largely RHEL-based, it's probably best to go with official RHEL documentation for CentOS.
