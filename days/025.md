# Day 025: Git Merge Branches

**Time**: 15 minutes

## Objective
The Nautilus application development team has been working on a project repository `/opt/blog.git`. This repo is cloned at `/usr/src/kodekloudrepos` on `storage server` in `Stratos DC`. They recently shared the following requirements with DevOps team:

- Create a new branch `xfusion` in `/usr/src/kodekloudrepos/blog` repo from `master` 
- Copy the `/tmp/index.html` file (present on storage server itself) into the repo. 
- Add/commit this file in the new branch and merge back that branch into master branch. 
- Finally, push the changes to the origin for both of the branches.

## Technologies Used
- `git`
- `ssh`

## Steps

1. SSH into `ststor01` server, move to correct directory, switch to correct branch

    ```bash
    # SSH
    thor@jumphost ~$ ssh natasha@ststor01
    [natasha@ststor01 ~]$

    # Change directory into /usr/src/kodekloudrepos/blog
    [natasha@ststor01 ~]$ cd /usr/src/kodekloudrepos/blog

    # Create a new branch xfusion in /usr/src/kodekloudrepos/blog repo from master
    [natasha@ststor01 blog]$ git branch
    # fatal: detected dubious ownership in repository at '/usr/src/kodekloudrepos/blog'
    # To add an exception for this directory, call:
    #         git config --global --add safe.directory /usr/src/kodekloudrepos/blog
    
    [natasha@ststor01 blog]$ git config --global --add safe.directory /usr/src/kodekloudrepos/blog
    
    [natasha@ststor01 blog]$ git branch
    # * master

    [natasha@ststor01 blog]$ sudo git checkout -b xfusion
    # Switched to a new branch 'xfusion'
    ```

2. Copy the `/tmp/index.html` file (present on storage server itself) into the repo and merge that branch to master

    ```bash
    # copy file
    [natasha@ststor01 blog]$ sudo cp /tmp/index.html /usr/src/kodekloudrepos/blog

    # git add and commit
    [natasha@ststor01 blog]$ sudo git add .
    [natasha@ststor01 blog]$ sudo git commit -m "remarks complete"
    # [xfusion 8e2d668] remarks complete
    # 1 file changed, 1 insertion(+)
    # create mode 100644 index.html

    # Merge into master
    [natasha@ststor01 blog]$ sudo git switch master
    # Switched to branch 'master'
    # Your branch is up to date with 'origin/master'.
    
    [natasha@ststor01 blog]$ sudo git merge xfusion
    # Updating 3637cee..8e2d668
    # Fast-forward
    # index.html | 1 +
    # 1 file changed, 1 insertion(+)
    # create mode 100644 index.html
    
    [natasha@ststor01 blog]$ sudo git push
    # Enumerating objects: 4, done.
    # Counting objects: 100% (4/4), done.
    # Delta compression using up to 16 threads
    # Compressing objects: 100% (2/2), done.
    # Writing objects: 100% (3/3), 330 bytes | 330.00 KiB/s, done.
    # Total 3 (delta 0), reused 0 (delta 0), pack-reused 0 (from 0)
    # To /opt/blog.git
    # 3637cee..8e2d668  master -> master

    ```

## Key Takeaways
- Always good to know how to merge from the command line as opposed to using a UI
