# Day 052: Revert Deployment to Previous Version in Kubernetes

**Time**: 5 minutes

## Objective
Earlier today, the Nautilus DevOps team deployed a new release for an application. However, a customer has reported a bug related to this recent release. Consequently, the team aims to revert to the previous version.

There exists a deployment named `nginx-deployment`; initiate a rollback to the previous revision.

Note: The `kubectl` utility on `jump_host` is configured to interact with the Kubernetes cluster.

## Technologies Used
- `kubectl`

## Steps

1. Check rollout history

    ```bash
    thor@jumphost ~$ k rollout history deployment nginx-deployment 

    deployment.apps/nginx-deployment 
    REVISION  CHANGE-CAUSE
    1         <none>
    2         kubectl set image deployment nginx-deployment nginx-container=nginx:alpine --kubeconfig=/root/.kube/config --record=true
    ```

2. Use `--help` to get the exact syntax we need

    ```bash
    thor@jumphost ~$ k rollout --help

    Manage the rollout of one or many resources.
            
    Valid resource types include:

    *  deployments
    *  daemonsets
    *  statefulsets

    Examples:
    # Rollback to the previous deployment
    kubectl rollout undo deployment/abc
    ...
    ```

3. Roll it on back:

    ```bash
    thor@jumphost ~$ k rollout undo deployment nginx-deployment 

    deployment.apps/nginx-deployment rolled back
    ```

4. Check status of rollback

    ```bash
    thor@jumphost ~$ k rollout status deployment nginx-deployment 

    deployment "nginx-deployment" successfully rolled out
    ```

## Key Takeaways
- Just use the examples in the `--help` command
