# Day 051: Execute Rolling Updates in Kubernetes

**Time**: 4 minutes

## Objective
An application currently running on the Kubernetes cluster employs the `nginx` web server. The Nautilus application development team has introduced some recent changes that need deployment. They've crafted an image `nginx:1.18` with the latest updates.

Execute a rolling update for this application, integrating the `nginx:1.18` image. The deployment is named `nginx-deployment`.

Ensure all pods are operational post-update.

## Technologies Used
- `kubectl`

## Steps

1. Get existing deployments, understand structure

    ```bash
    # Get deployments
    thor@jumphost ~$ k get deployments.apps 

    NAME               READY   UP-TO-DATE   AVAILABLE   AGE
    nginx-deployment   3/3     3            3           12s

    # Run a describe, so you can see the image in use now
    thor@jumphost ~$ k describe deployments.apps nginx-deployment 

    Name:                   nginx-deployment
    ...
    Pod Template:
    Labels:  app=nginx-app
    Containers:
    nginx-container:
        Image:         nginx:1.16
    ...
    ```

2. Roll out the update

    ```bash
    # Set the image to the one requested
    thor@jumphost ~$ kubectl set image deployment/nginx-deployment nginx-container=nginx:1.18

    deployment.apps/nginx-deployment image updated

    # Check the status of the rollout
    thor@jumphost ~$ k rollout status deployment nginx-deployment 

    deployment "nginx-deployment" successfully rolled out
    ```

3. Verify requested changes were made

    ```bash
    # Describe deployments to verify changes are done
    thor@jumphost ~$ k describe deployments.apps nginx-deployment 

    Name:                   nginx-deployment
    ...
    Pod Template:
    Labels:  app=nginx-app
    Containers:
    nginx-container:
        Image:         nginx:1.18
    ...
    ```

## Key Takeaways
- Look at the docs, there's an exact example of this: https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#rolling-back-a-deployment
